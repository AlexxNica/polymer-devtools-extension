<link rel="import" href="../editable-label/editable-label.html">

<polymer-element name='object-tree' attributes='indent basewidth' constructor='ObjectTree'>
  <template>
    <style>
      #content {
        white-space: nowrap;
        font-size: 14px;
      }
      editable-label {
        display: inline-block;
        vertical-align: middle;
      }
      .labelText {
        font-family: dejavu sans mono, monospace;
      }
      .typeText {
        color: gray;
        font-family: "Arial", Courier, monospace;
        font-size: 12px;
      }
      .expandBtn {
        text-align: center;
        cursor: pointer;
        width: 10px;
        height: 10px;
      }
      .children {
        margin-left: {{indent + baseWidth}}px;
      }
    </style>
    <p id='content'>
      <template repeat='{{prop, index in tree}}'>
        <img class='expandBtn' id='img{{index}}' hidden?='{{prop.type != "object"}}' on-click='{{toggle}}' 
          src='{{prop.type == "object" ? (prop.value.length > 0 ? "../res/collapse.png" : "../res/expand.png") : "../res/blank.png"}}' state='{{prop.value.length > 0 ? "expanded" : "collapsed"}}'></span>
        <img class='expandBtn' hidden?='{{prop.type == "object"}}' src='../res/blank.png'></span>
        <label class='labelText'>{{prop.name}}</label>
        <label class='typeText' hidden?='{{prop.type != "object" && prop.type != "array"}}'>{{prop.type}}</label>
        <label class='typeText' hidden?='{{!prop.hasAccessor}}'>&lt;accessor&gt;</label>
        <editable-label id='field{{index}}' text='{{prop.value}}'
          hidden?='{{prop.type == "object" || prop.type == "array"}}'>
        </editable-label>
        <p class='children'>
          <object-tree id='child{{index}}'></object-tree>
        </p>
      </template>
    </p>
  </template>
  <script src='object-tree-2.js'></script>
</polymer-element>
